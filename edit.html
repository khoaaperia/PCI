<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Acme Payment Solutions Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f7f7f7; }
        header, footer { background: #003366; color: #fff; padding: 20px; text-align: center; }
        main { max-width: 700px; margin: 30px auto; background: #fff; padding: 30px 20px; border-radius: 8px; box-shadow: 0 2px 8px #0001; }
        label { display: block; margin-top: 20px; font-weight: bold; }
        input[type="text"], input[type="email"], textarea { width: 100%; padding: 8px; margin-top: 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        textarea { min-height: 60px; }
        ul { padding-left: 20px; }
        .list-edit { margin-bottom: 10px; }
        .list-edit input { width: 90%; display: inline-block; }
        .list-edit button { margin-left: 5px; }
        .section-group { margin-bottom: 30px; }
        button[type="submit"], .add-btn { background: #003366; color: #fff; border: none; padding: 10px 18px; border-radius: 4px; cursor: pointer; margin-top: 20px; }
        .add-btn { padding: 4px 10px; font-size: 0.9em; margin-top: 0; }
        @media (max-width: 600px) {
            main { padding: 10px 2vw; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Edit Acme Payment Solutions Page</h1>
    </header>
    <main>
        <form id="editForm">
            <div class="section-group">
                <label for="about">About Us</label>
                <textarea id="about" name="about"></textarea>
            </div>
            <div class="section-group">
                <label>Our Services</label>
                <div id="services-list"></div>
                <button type="button" class="add-btn" onclick="addListItem('services')">+ Add Service</button>
            </div>
            <div class="section-group">
                <label for="expertise">Industry Expertise</label>
                <textarea id="expertise" name="expertise"></textarea>
            </div>
            <div class="section-group">
                <label>Case Studies</label>
                <div id="case-studies-list"></div>
                <button type="button" class="add-btn" onclick="addListItem('case-studies')">+ Add Case Study</button>
            </div>
            <div class="section-group">
                <label for="technologies">Technologies</label>
                <textarea id="technologies" name="technologies"></textarea>
            </div>
            <div class="section-group">
                <label for="testimonial">Testimonial</label>
                <textarea id="testimonial" name="testimonial"></textarea>
            </div>
            <div class="section-group">
                <label for="contact-email">Contact Email</label>
                <input type="email" id="contact-email" name="contact-email">
                <label for="contact-phone" style="margin-top:10px;">Contact Phone</label>
                <input type="text" id="contact-phone" name="contact-phone">
            </div>
            <button type="submit">Save Changes</button>
        </form>
    </main>
    <footer>
        &copy; 2024 Acme Payment Solutions. All rights reserved.
    </footer>
    <script>
async function loadData() {
    const res = await fetch('/api/data');
    const data = await res.json();
    document.getElementById('about').value = data.about || '';
    document.getElementById('expertise').value = data.expertise || '';
    document.getElementById('technologies').value = data.technologies || '';
    document.getElementById('testimonial').value = (data.testimonials && data.testimonials[0]?.quote + ' – ' + data.testimonials[0]?.author) || '';
    document.getElementById('contact-email').value = data.contact?.email || '';
    document.getElementById('contact-phone').value = data.contact?.phone || '';
    renderList('services', data.services || []);
    renderList('case-studies', data.caseStudies || []);
}

async function saveData(e) {
    e.preventDefault();
    const services = Array.from(document.querySelectorAll('#services-list input')).map(i => i.value.trim()).filter(Boolean);
    const caseStudies = Array.from(document.querySelectorAll('#case-studies-list input')).map(i => i.value.trim()).filter(Boolean);
    const testimonialText = document.getElementById('testimonial').value.trim();
    let quote = testimonialText, author = '';
    if (testimonialText.includes('–')) {
        [quote, author] = testimonialText.split('–').map(s => s.trim());
    }
    const data = {
        about: document.getElementById('about').value.trim(),
        services,
        expertise: document.getElementById('expertise').value.trim(),
        caseStudies,
        technologies: document.getElementById('technologies').value.trim(),
        testimonials: [{ quote, author }],
        contact: {
            email: document.getElementById('contact-email').value.trim(),
            phone: document.getElementById('contact-phone').value.trim()
        }
    };
    const res = await fetch('/api/data', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    });
    if (res.ok) alert('Changes saved!');
    else alert('Failed to save changes.');
}

document.getElementById('editForm').addEventListener('submit', saveData);
loadData();
</script>
</body>
</html>